<!doctype html>
<html>
  <head>
    <title>City Hospital | Login</title>

    <!-- CSS -->
    <link
      rel="stylesheet"
      href="assets/plugins/bootstrap/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/header.css" />
    <link rel="stylesheet" href="assets/css/footer.css" />
    <link
      rel="stylesheet"
      href="assets/plugins/font-awesome/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="assets/css/custom.css" />
  </head>

  <body>
    <!-- Header -->
    <div id="header"></div>

    <div class="wrapper">
      <!-- Title -->
      <div style="text-align: center; margin-top: 50px">
        <h2>LOGIN</h2>
      </div>

      <!-- Login Form -->
      <div class="container content">
        <div class="row">
          <div class="col-md-4 col-md-offset-4">
            <form class="reg-page">
              <div class="reg-header">
                <h2>Login to your account</h2>
              </div>

              <div class="input-group" style="margin-bottom: 20px">
                <span class="input-group-addon"
                  ><i class="fa fa-user"></i
                ></span>
                <input
                  id="email"
                  type="email"
                  placeholder="Email Address"
                  class="form-control"
                  required
                />
              </div>

              <div class="input-group" style="margin-bottom: 20px">
                <span class="input-group-addon"
                  ><i class="fa fa-lock"></i
                ></span>
                <input
                  id="password"
                  type="password"
                  placeholder="Password"
                  class="form-control"
                  required
                />
              </div>

              <button id="loginBtn" class="btn-u btn-block" type="button">
                Login
              </button>

              <hr />
              <p>
                Don't have an account?
                <a href="registration.html">Register here</a>
              </p>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- Load Header & Footer -->
    <script>
      fetch("header.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("header").innerHTML = data));

      fetch("footer.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("footer").innerHTML = data));
    </script>

    <!-- Login Script -->
    <script>
      document
        .getElementById("loginBtn")
        .addEventListener("click", function () {
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          const storedUser = JSON.parse(localStorage.getItem("regToken"));

          if (!storedUser) {
            alert("No user registered. Please register first.");
            return;
          }

          if (email === storedUser.email && password === storedUser.password) {
            window.location.href = "dashboard.html";
          } else {
            alert("Incorrect Email or Password");
          }
        });
    </script>
    <script>
      function toggleMenu() {
        var menu = document.getElementById("mobileMenu");

        if (menu.style.display === "none" || menu.style.display === "") {
          menu.style.display = "block";
        } else {
          menu.style.display = "none";
        }
      }
    </script>
  </body>
</html>
